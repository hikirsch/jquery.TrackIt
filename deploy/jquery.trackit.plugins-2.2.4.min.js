(function(a){a.TrackItPlugins={DataSanityCheck:{Init:function(){this.ready(a.TrackItPlugins.DataSanityCheck.Go)},Go:function(l,d){holderStatus={};if(!l){l={}}if(!d){d={}}for(var m in this.Data){if(!this.settings.SanityCheckMissingOnly){holderStatus[m]={}}keyData=cloneObj(this.Data[m]);for(var e in keyData){var h=keyData[e];if(typeof h=="string"){var b=this.GetPlaceHolderArray(h);if(b){for(var f=0;f<b.length;f++){var j=b[f];var g=j.toString().substring(1,(j.length-1)).toString().split(":");var c=g[0];var k=g[1];if(!(this.Holders[c])&&!(keyData[c])&&!(l[c])){if(!holderStatus[m]){holderStatus[m]={}}holderStatus[m][c]=false}else{if(!this.settings.SanityCheckMissingOnly){holderStatus[m][c]=true}else{if(holderStatus[m]&&holderStatus[m][c]){delete holderStatus[m][c]}}}}}}}}if(this.settings.ShowDebugInfo){console.groupCollapsed("TrackItPlugins.DataSanityCheck() - Results");console.dir(holderStatus);console.groupEnd()}}},CopyPropToEVar:{Init:function(){this.ready(TrackItPlugins.CopyPropToEVar.Go)},Go:function(){if(this.settings.ShowDebugInfo){console.groupCollapsed("TrackItPlugins.CopyPropToEVar.Go() - Results")}var d=new RegExp("(\\d+)","g");var e={};for(var c in this.Data){keyData=this.Data[c];for(var f in keyData){if(f.indexOf("prop")>-1){var b=f.match(d)[0];keyData["eVar"+b]=keyData["prop"+b];if(!e[c]){e[c]={}}e[c]["eVar"+b]=keyData[f]}}}if(this.settings.ShowDebugInfo){console.dir(e);console.groupEnd()}}},CheckUrlMapping:{Init:function(){this.ExcludeAttribute("urlMap");this.ready(a.TrackItPlugins.CheckUrlMapping.Go)},Go:function(){var d=this;if(document.location.hash.length>0&&!this.settings.EnableUrlMappingWithDeepLink){if(this.settings.ShowDebugInfo){console.info("TrackItPlugins.CheckUrlMapping.Go() - Deep Link Detected, Disabling Url Mapping")}}else{if(this.settings.ShowDebugInfo){console.group("TrackItPlugins.CheckUrlMapping.Go() - Enabled")}if(this.settings.ShowDebugInfo){console.info("TrackItPlugins.CheckUrlMapping.Go() - Check against URL: ",document.location.pathname)}var e=false;for(var c in this.Data){var f=this.Data[c];if(f.urlMap){var b=f.urlMap.split("|");a.each(b,function(){var g=this.replace("[","\\[");g=g.replace("]","\\]");g=g.replace("*",".*");if(!e&&(new RegExp("^"+g+"$","i")).test(unescape(document.location.pathname))){if(d.settings.ShowDebugInfo){console.info("TrackItPlugins.CheckUrlMapping.Go() - Found Key: '"+c+"'")}d.track(c,{});e=true}})}}if(this.settings.ShowDebugInfo&&!e){console.info("TrackItPlugins.CheckUrlMapping.Go() - Key Not Found!")}}if(this.settings.ShowDebugInfo){console.groupEnd()}}},RecordLastTrack:{Init:function(){this.__LAST_REPORT={};this.addCallback("afterTrack",function(b){a.TrackItPlugins.RecordLastTrack.__LAST_REPORT=a.extend(a.TrackItPlugins.RecordLastTrack.__LAST_REPORT,b.parsedData);if(this.settings.ShowDebugInfo){console.info("TrackItPlugins.RecordLastTrack() - Last data set saved!")}});this.Holders.LAST=a.TrackItPlugins.RecordLastTrack.LastHolder},LastHolder:function(b){if(a.TrackItPlugins.RecordLastTrack.__LAST_REPORT&&a.TrackItPlugins.RecordLastTrack.__LAST_REPORT[b.value]){return a.TrackItPlugins.RecordLastTrack.__LAST_REPORT[b.value]}else{if(b.instance.settings.ShowDebugInfo){console.warn("TrackItPlugins.RecordLastTrack() - LAST value request not found '"+b.value+"'")}}}},CssSelector:{Init:function(){this.ExcludeAttribute("cssSelector");this.ready(a.TrackItPlugins.CssSelector.Go)},Go:function(){var c=this;if(c.settings.ShowDebugInfo){console.group("$.TrackItPlugins.CssSelector() - Enabled'")}for(var d in c.Data){var b=this.Data[d].cssSelector;if(b&&b.length>0){a(b).live("click",function(){c.track(d,{ele:this})});if(c.settings.ShowDebugInfo){console.info('"',d,'" --> "',b,'"')}}}if(c.settings.ShowDebugInfo){console.groupEnd()}}}}})(jQuery);